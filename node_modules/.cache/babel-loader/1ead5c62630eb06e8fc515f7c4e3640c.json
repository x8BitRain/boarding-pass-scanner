{"ast":null,"code":"var _jsxFileName = \"/home/mint/ticket2calendar/src/components/capture.jsx\";\nimport React from 'react';\nexport default class Capture extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    var image = document.getElementById('image');\n    var canvas = document.getElementById('canvas');\n    var ctx = canvas.getContext(\"2d\");\n    canvas.width = image.width;\n    canvas.height = image.height;\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n    const scale = canvas.width / image.width;\n\n    function detect() {\n      if (window.BarcodeDetector == undefined) {\n        var footer = document.getElementsByTagName('footer')[0];\n        footer.innerHTML = \"Barcode Detection not supported\";\n        console.error('Barcode Detection not supported');\n        return;\n      } // var barcodeDetector = new BarcodeDetector();\n      // barcodeDetector.detect(image)\n      //   .then(barcodes => {\n      //     // Draw the boxes on the <canvas>.\n      //     var ctx = document.getElementById('canvas').getContext(\"2d\");\n      //     ctx.beginPath();\n      //     ctx.lineWidth = 2;\n      //     ctx.strokeStyle = \"red\";\n      //     for(var i = 0; i < barcodes.length; i++) {\n      //       ctx.rect(Math.floor(barcodes[i].boundingBox.x * scale), \n      //                Math.floor(barcodes[i].boundingBox.y * scale),\n      //                Math.floor(barcodes[i].boundingBox.width * scale), \n      //                Math.floor(barcodes[i].boundingBox.height * scale));\n      //       ctx.stroke();\n      //     }\n      //     ctx.closePath();\n      //     ctx.beginPath();\n      //     ctx.strokeStyle = \"yellow\";\n      //     for(var i = 0; i < barcodes.length; i++) {\n      //       ctx.moveTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), \n      //                  Math.floor(barcodes[i].cornerPoints[0].y * scale));\n      //       ctx.lineTo(Math.floor(barcodes[i].cornerPoints[1].x * scale), \n      //                  Math.floor(barcodes[i].cornerPoints[1].y * scale));\n      //       ctx.lineTo(Math.floor(barcodes[i].cornerPoints[2].x * scale), \n      //                  Math.floor(barcodes[i].cornerPoints[2].y * scale));\n      //       ctx.lineTo(Math.floor(barcodes[i].cornerPoints[3].x * scale), \n      //                  Math.floor(barcodes[i].cornerPoints[3].y * scale));\n      //       ctx.lineTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), \n      //                  Math.floor(barcodes[i].cornerPoints[0].y * scale));\n      //       ctx.stroke();\n      //     }\n      //     ctx.closePath();\n      //     // Add the barcodes as strings to the <footer>\n      //     var footer = document.getElementsByTagName('footer')[0];\n      //     footer.innerHTML = \n      //         '<p>Detected ' + barcodes.length + ' barcodes</p><ul>';\n      //     for(var i = 0; i < barcodes.length; i++) {\n      //       footer.innerHTML += \n      //           '<li>@ (' + barcodes[i].boundingBox.x + ',' + \n      //           barcodes[i].boundingBox.y + '), size (' + \n      //           barcodes[i].boundingBox.width + 'x' + \n      //           barcodes[i].boundingBox.height + ')' + \n      //           '; rawValue=' + barcodes[i].rawValue + '</li>';\n      //     }\n      //     footer.innerHTML += '</ul>';\n      //   }).catch((e) => {\n      //     var footer = document.getElementsByTagName('footer')[0];\n      //     footer.innerHTML = \"Boo, Barcode Detection failed: \" + e;\n      //     console.error(\"Boo, Barcode Detection failed: \" + e);\n      //   })\n\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"detect\",\n      onclick: \"detect()\",\n      class: \"btn btn-lg btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Detect barcodes\"), React.createElement(\"img\", {\n      hidden: true,\n      id: \"image\",\n      crossorigin: \"anonymous \",\n      src: \"https://raw.githubusercontent.com/ihabunek/pdf417-py/master/images/1_basic.jpg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"canvas\", {\n      id: \"canvas\",\n      width: \"320\",\n      height: \"320\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }));\n  }\n\n}","map":{"version":3,"sources":["/home/mint/ticket2calendar/src/components/capture.jsx"],"names":["React","Capture","Component","constructor","props","componentDidMount","image","document","getElementById","canvas","ctx","getContext","width","height","drawImage","scale","detect","window","BarcodeDetector","undefined","footer","getElementsByTagName","innerHTML","console","error","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe,MAAMC,OAAN,SAAsBD,KAAK,CAACE,SAA5B,CAAsC;AACnDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACD;;AAEDC,EAAAA,iBAAiB,GAAG;AACnB,QAAIC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AACH,QAAIC,MAAM,GAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb;AACA,QAAIE,GAAG,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAV;AACAF,IAAAA,MAAM,CAACG,KAAP,GAAeN,KAAK,CAACM,KAArB;AACAH,IAAAA,MAAM,CAACI,MAAP,GAAgBP,KAAK,CAACO,MAAtB;AACAH,IAAAA,GAAG,CAACI,SAAJ,CAAcR,KAAd,EACc,CADd,EACiB,CADjB,EACoBA,KAAK,CAACM,KAD1B,EACiCN,KAAK,CAACO,MADvC,EAEc,CAFd,EAEiB,CAFjB,EAEoBJ,MAAM,CAACG,KAF3B,EAEkCH,MAAM,CAACI,MAFzC;AAIA,UAAME,KAAK,GAAGN,MAAM,CAACG,KAAP,GAAeN,KAAK,CAACM,KAAnC;;AAEA,aAASI,MAAT,GAAkB;AAChB,UAAIC,MAAM,CAACC,eAAP,IAA0BC,SAA9B,EAAyC;AACvC,YAAIC,MAAM,GAAGb,QAAQ,CAACc,oBAAT,CAA8B,QAA9B,EAAwC,CAAxC,CAAb;AACAD,QAAAA,MAAM,CAACE,SAAP,GAAmB,iCAAnB;AACAC,QAAAA,OAAO,CAACC,KAAR,CAAc,iCAAd;AACA;AACD,OANe,CAQhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AACD;AAEE;;AAEDC,EAAAA,MAAM,GAAG;AACP,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAQ,MAAA,EAAE,EAAC,QAAX;AAAoB,MAAA,OAAO,EAAC,UAA5B;AAAwC,MAAA,KAAK,EAAC,wBAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADD,EAGH;AAAK,MAAA,MAAM,MAAX;AAAY,MAAA,EAAE,EAAC,OAAf;AAAuB,MAAA,WAAW,EAAC,YAAnC;AAA+C,MAAA,GAAG,EAAC,gFAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHG,OAGwI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHxI,EAIH;AAAQ,MAAA,EAAE,EAAC,QAAX;AAAoB,MAAA,KAAK,EAAC,KAA1B;AAAgC,MAAA,MAAM,EAAC,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJG,CADF;AAQD;;AA3FkD","sourcesContent":["import React from 'react';\n\nexport default class Capture extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n  \tvar image = document.getElementById('image');\nvar canvas = document.getElementById('canvas');\nvar ctx = canvas.getContext(\"2d\");\ncanvas.width = image.width;\ncanvas.height = image.height;\nctx.drawImage(image, \n              0, 0, image.width, image.height,\n              0, 0, canvas.width, canvas.height);\n\nconst scale = canvas.width / image.width;\n\nfunction detect() {\n  if (window.BarcodeDetector == undefined) {\n    var footer = document.getElementsByTagName('footer')[0];\n    footer.innerHTML = \"Barcode Detection not supported\";\n    console.error('Barcode Detection not supported');\n    return;\n  }\n  \n  // var barcodeDetector = new BarcodeDetector();\n  // barcodeDetector.detect(image)\n  //   .then(barcodes => {\n  //     // Draw the boxes on the <canvas>.\n  //     var ctx = document.getElementById('canvas').getContext(\"2d\");\n  //     ctx.beginPath();\n  //     ctx.lineWidth = 2;\n  //     ctx.strokeStyle = \"red\";\n  //     for(var i = 0; i < barcodes.length; i++) {\n  //       ctx.rect(Math.floor(barcodes[i].boundingBox.x * scale), \n  //                Math.floor(barcodes[i].boundingBox.y * scale),\n  //                Math.floor(barcodes[i].boundingBox.width * scale), \n  //                Math.floor(barcodes[i].boundingBox.height * scale));\n  //       ctx.stroke();\n  //     }\n  //     ctx.closePath();\n\n  //     ctx.beginPath();\n  //     ctx.strokeStyle = \"yellow\";\n  //     for(var i = 0; i < barcodes.length; i++) {\n  //       ctx.moveTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), \n  //                  Math.floor(barcodes[i].cornerPoints[0].y * scale));\n  //       ctx.lineTo(Math.floor(barcodes[i].cornerPoints[1].x * scale), \n  //                  Math.floor(barcodes[i].cornerPoints[1].y * scale));\n  //       ctx.lineTo(Math.floor(barcodes[i].cornerPoints[2].x * scale), \n  //                  Math.floor(barcodes[i].cornerPoints[2].y * scale));\n  //       ctx.lineTo(Math.floor(barcodes[i].cornerPoints[3].x * scale), \n  //                  Math.floor(barcodes[i].cornerPoints[3].y * scale));\n  //       ctx.lineTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), \n  //                  Math.floor(barcodes[i].cornerPoints[0].y * scale));\n  //       ctx.stroke();\n  //     }\n  //     ctx.closePath();\n    \n  //     // Add the barcodes as strings to the <footer>\n  //     var footer = document.getElementsByTagName('footer')[0];\n  //     footer.innerHTML = \n  //         '<p>Detected ' + barcodes.length + ' barcodes</p><ul>';\n  //     for(var i = 0; i < barcodes.length; i++) {\n  //       footer.innerHTML += \n  //           '<li>@ (' + barcodes[i].boundingBox.x + ',' + \n  //           barcodes[i].boundingBox.y + '), size (' + \n  //           barcodes[i].boundingBox.width + 'x' + \n  //           barcodes[i].boundingBox.height + ')' + \n  //           '; rawValue=' + barcodes[i].rawValue + '</li>';\n  //     }\n  //     footer.innerHTML += '</ul>';\n  \n  //   }).catch((e) => {\n  //     var footer = document.getElementsByTagName('footer')[0];\n  //     footer.innerHTML = \"Boo, Barcode Detection failed: \" + e;\n  //     console.error(\"Boo, Barcode Detection failed: \" + e);\n  //   })\n}\n\n  }\n\n  render() {\n    return (\n      <div>\n      \t<button id=\"detect\" onclick=\"detect()\"  class=\"btn btn-lg btn-primary\">Detect barcodes</button>\n\n\t\t\t<img hidden id=\"image\" crossorigin='anonymous 'src=\"https://raw.githubusercontent.com/ihabunek/pdf417-py/master/images/1_basic.jpg\"></img> <br/>\n\t\t\t<canvas id=\"canvas\" width=\"320\" height=\"320\"></canvas>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}