{"ast":null,"code":"import _classCallCheck from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{parseBCBP}from'bcbp-parser';var Capture=/*#__PURE__*/function(_React$Component){_inherits(Capture,_React$Component);function Capture(props){var _this;_classCallCheck(this,Capture);_this=_possibleConstructorReturn(this,_getPrototypeOf(Capture).call(this,props));_this.thing=function(e){console.log(_this.state.result_string);console.log(_this.state.bcbp_result);};_this.state={result_string:null,bcbp_result:{}};return _this;}_createClass(Capture,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;document.getElementById(\"pcCanvas\").remove();document.getElementById(\"mobileCanvas\").remove();var w=new Worker(\"result_check.js\");w.onmessage=function(){console.log(_this2.state.result_string);if(localStorage.barcode){_this2.setState({result_string:localStorage.barcode},function(){localStorage.clear();w.terminate();console.log(_this2.state.result_string);_this2.setState({bcbp_result:parseBCBP(_this2.state.result_string)});});}};}// detect = () => {\n//   this.setState({ result_string:window.string_result }, () => {\n//     console.log(this.state.result_string);\n//     console.log(parseBCBP(this.state.result_string))\n//   });\n// };\n},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",{id:\"dbr\"}),this.state.result_string===\"test\"?React.createElement(\"h1\",null,\"BIG TEST\"):null,React.createElement(\"button\",{onClick:this.detect},\"result!\"),React.createElement(\"button\",{onClick:this.thing},\"do thing\"));}}]);return Capture;}(React.Component);export{Capture as default};","map":{"version":3,"sources":["/home/mint/ticket2calendar/src/components/capture.jsx"],"names":["React","parseBCBP","Capture","props","thing","e","console","log","state","result_string","bcbp_result","document","getElementById","remove","w","Worker","onmessage","localStorage","barcode","setState","clear","terminate","detect","Component"],"mappings":"+iBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,KAA0B,aAA1B,C,GAEqBC,CAAAA,O,6EACnB,iBAAYC,KAAZ,CAAmB,yCACjB,yEAAMA,KAAN,GADiB,MAmCnBC,KAnCmB,CAmCX,SAACC,CAAD,CAAO,CACbC,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWC,aAAvB,EACAH,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWE,WAAvB,EACD,CAtCkB,CAEjB,MAAKF,KAAL,CAAa,CACXC,aAAa,CAAE,IADJ,CAEXC,WAAW,CAAE,EAFF,CAAb,CAFiB,aAMlB,C,iFACmB,iBAClBC,QAAQ,CAACC,cAAT,CAAwB,UAAxB,EAAoCC,MAApC,GACAF,QAAQ,CAACC,cAAT,CAAwB,cAAxB,EAAwCC,MAAxC,GACA,GAAIC,CAAAA,CAAC,CAAG,GAAIC,CAAAA,MAAJ,CAAW,iBAAX,CAAR,CACAD,CAAC,CAACE,SAAF,CAAc,UAAM,CAClBV,OAAO,CAACC,GAAR,CAAY,MAAI,CAACC,KAAL,CAAWC,aAAvB,EACA,GAAIQ,YAAY,CAACC,OAAjB,CAA0B,CACxB,MAAI,CAACC,QAAL,CAAc,CACZV,aAAa,CAAEQ,YAAY,CAACC,OADhB,CAAd,CAEG,UAAK,CACND,YAAY,CAACG,KAAb,GACAN,CAAC,CAACO,SAAF,GACAf,OAAO,CAACC,GAAR,CAAY,MAAI,CAACC,KAAL,CAAWC,aAAvB,EACA,MAAI,CAACU,QAAL,CAAc,CACZT,WAAW,CAAET,SAAS,CAAC,MAAI,CAACO,KAAL,CAAWC,aAAZ,CADV,CAAd,EAGD,CATD,EAUD,CACF,CAdD,CAeD,CAED;AACA;AACA;AACA;AACA;AACA;uCAOS,CACP,MACE,gCACE,2BAAK,EAAE,CAAC,KAAR,EADF,CAEM,KAAKD,KAAL,CAAWC,aAAX,GAA6B,MAA7B,CAAsC,yCAAtC,CAA0D,IAFhE,CAGE,8BAAQ,OAAO,CAAE,KAAKa,MAAtB,YAHF,CAIE,8BAAQ,OAAO,CAAE,KAAKlB,KAAtB,aAJF,CADF,CAQD,C,qBAlDkCJ,KAAK,CAACuB,S,SAAtBrB,O","sourcesContent":["import React from \"react\";\nimport { parseBCBP } from 'bcbp-parser';\n\nexport default class Capture extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      result_string: null, \n      bcbp_result: {}\n    }\n  }\n  componentDidMount() {\n    document.getElementById(\"pcCanvas\").remove();\n    document.getElementById(\"mobileCanvas\").remove();\n    let w = new Worker(\"result_check.js\");\n    w.onmessage = () => {\n      console.log(this.state.result_string)\n      if (localStorage.barcode) {\n        this.setState({\n          result_string: localStorage.barcode\n        }, ()=> {\n          localStorage.clear();\n          w.terminate();\n          console.log(this.state.result_string);\n          this.setState({\n            bcbp_result: parseBCBP(this.state.result_string)\n          });\n        });\n      }\n    };\n  }\n\n  // detect = () => {\n  //   this.setState({ result_string:window.string_result }, () => {\n  //     console.log(this.state.result_string);\n  //     console.log(parseBCBP(this.state.result_string))\n  //   });\n  // };\n\n  thing = (e) => {\n    console.log(this.state.result_string);\n    console.log(this.state.bcbp_result);\n  }\n\n  render() {\n    return (\n      <div>\n        <div id=\"dbr\" ></div> \n          { this.state.result_string === \"test\" ? <h1>BIG TEST</h1> : null }\n        <button onClick={this.detect}>result!</button>\n        <button onClick={this.thing}>do thing</button>\n      </div>\n    );\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}