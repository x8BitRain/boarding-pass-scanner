{"ast":null,"code":"import _classCallCheck from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/mint/ticket2calendar/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';var Capture=/*#__PURE__*/function(_React$Component){_inherits(Capture,_React$Component);function Capture(props){var _this;_classCallCheck(this,Capture);_this=_possibleConstructorReturn(this,_getPrototypeOf(Capture).call(this,props));_this.detect=function(){// if (window.BarcodeDetector === undefined) {\n//   console.log('Barcode Detection not supported');\n//   return;\n// }\nvar image=document.getElementById('image');var canvas=document.getElementById('canvas');var ctx=canvas.getContext(\"2d\");var scale=canvas.width/image.width;var barcodeDetector=new document.BarcodeDetector();barcodeDetector.detect(image).then(function(barcodes){// Draw the boxes on the <canvas>.\nvar ctx=document.getElementById('canvas').getContext(\"2d\");ctx.beginPath();ctx.lineWidth=2;ctx.strokeStyle=\"red\";for(var i=0;i<barcodes.length;i++){ctx.rect(Math.floor(barcodes[i].boundingBox.x*scale),Math.floor(barcodes[i].boundingBox.y*scale),Math.floor(barcodes[i].boundingBox.width*scale),Math.floor(barcodes[i].boundingBox.height*scale));ctx.stroke();}ctx.closePath();ctx.beginPath();ctx.strokeStyle=\"yellow\";for(var _i=0;_i<barcodes.length;_i++){ctx.moveTo(Math.floor(barcodes[_i].cornerPoints[0].x*scale),Math.floor(barcodes[_i].cornerPoints[0].y*scale));ctx.lineTo(Math.floor(barcodes[_i].cornerPoints[1].x*scale),Math.floor(barcodes[_i].cornerPoints[1].y*scale));ctx.lineTo(Math.floor(barcodes[_i].cornerPoints[2].x*scale),Math.floor(barcodes[_i].cornerPoints[2].y*scale));ctx.lineTo(Math.floor(barcodes[_i].cornerPoints[3].x*scale),Math.floor(barcodes[_i].cornerPoints[3].y*scale));ctx.lineTo(Math.floor(barcodes[_i].cornerPoints[0].x*scale),Math.floor(barcodes[_i].cornerPoints[0].y*scale));ctx.stroke();}ctx.closePath();// Add the barcodes as strings to the <footer>\nvar footer=document.getElementsByTagName('footer');footer.innerHTML='<p>Detected '+barcodes.length+' barcodes</p><ul>';for(var _i2=0;_i2<barcodes.length;_i2++){footer.innerHTML+='<li>@ ('+barcodes[_i2].boundingBox.x+','+barcodes[_i2].boundingBox.y+'), size ('+barcodes[_i2].boundingBox.width+'x'+barcodes[_i2].boundingBox.height+')'+'; rawValue='+barcodes[_i2].rawValue+'</li>';}footer.innerHTML+='</ul>';}).catch(function(e){var footer=document.getElementsByTagName('footer');footer.innerHTML=\"Boo, Barcode Detection failed: \"+e;console.error(\"Boo, Barcode Detection failed: \"+e);});};return _this;}_createClass(Capture,[{key:\"componentDidMount\",value:function componentDidMount(){var image=document.getElementById('image');var canvas=document.getElementById('canvas');var ctx=canvas.getContext(\"2d\");canvas.width=image.width;canvas.height=image.height;ctx.drawImage(image,0,0,image.width,image.height,0,0,canvas.width,canvas.height);var scale=canvas.width/image.width;}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"button\",{id:\"detect\",onClick:this.detect},\"Detect barcodes\"),React.createElement(\"img\",{hidden:true,id:\"image\",crossOrigin:\"anonymous \",src:\"https://raw.githubusercontent.com/ihabunek/pdf417-py/master/images/1_basic.jpg\"}),\" \",React.createElement(\"br\",null),React.createElement(\"canvas\",{id:\"canvas\",width:\"320\",height:\"320\"}),React.createElement(\"footer\",null,\"waiting\"));}}]);return Capture;}(React.Component);export{Capture as default};","map":{"version":3,"sources":["/home/mint/ticket2calendar/src/components/capture.jsx"],"names":["React","Capture","props","detect","image","document","getElementById","canvas","ctx","getContext","scale","width","barcodeDetector","BarcodeDetector","then","barcodes","beginPath","lineWidth","strokeStyle","i","length","rect","Math","floor","boundingBox","x","y","height","stroke","closePath","moveTo","cornerPoints","lineTo","footer","getElementsByTagName","innerHTML","rawValue","catch","e","console","error","drawImage","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nexport default class Capture extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\n}\n\tcomponentDidMount() {\n\t\tlet image = document.getElementById('image');\n\t\tlet canvas = document.getElementById('canvas');\n\t\tlet ctx = canvas.getContext(\"2d\");\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\t\tctx.drawImage(image, \n\t\t0, 0, image.width, image.height,\n\t\t0, 0, canvas.width, canvas.height);\n\n\t\tconst scale = canvas.width / image.width;\n\t}\n\n\tdetect = () => {\n  // if (window.BarcodeDetector === undefined) {\n  //   console.log('Barcode Detection not supported');\n  //   return;\n  // }\n\n  let image = document.getElementById('image');\n\tlet canvas = document.getElementById('canvas');\n\tlet ctx = canvas.getContext(\"2d\");\n\tconst scale = canvas.width / image.width;\n  let barcodeDetector = new document.BarcodeDetector();\n  barcodeDetector.detect(image)\n    .then(barcodes => {\n      // Draw the boxes on the <canvas>.\n      let ctx = document.getElementById('canvas').getContext(\"2d\");\n      ctx.beginPath();\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = \"red\";\n      for(let i = 0; i < barcodes.length; i++) {\n        ctx.rect(Math.floor(barcodes[i].boundingBox.x * scale), \n                 Math.floor(barcodes[i].boundingBox.y * scale),\n                 Math.floor(barcodes[i].boundingBox.width * scale), \n                 Math.floor(barcodes[i].boundingBox.height * scale));\n        ctx.stroke();\n      }\n      ctx.closePath();\n\n      ctx.beginPath();\n      ctx.strokeStyle = \"yellow\";\n      for(let i = 0; i < barcodes.length; i++) {\n        ctx.moveTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[0].y * scale));\n        ctx.lineTo(Math.floor(barcodes[i].cornerPoints[1].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[1].y * scale));\n        ctx.lineTo(Math.floor(barcodes[i].cornerPoints[2].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[2].y * scale));\n        ctx.lineTo(Math.floor(barcodes[i].cornerPoints[3].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[3].y * scale));\n        ctx.lineTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[0].y * scale));\n        ctx.stroke();\n      }\n      ctx.closePath();\n    \n      // Add the barcodes as strings to the <footer>\n      let footer = document.getElementsByTagName('footer');\n      footer.innerHTML = \n          '<p>Detected ' + barcodes.length + ' barcodes</p><ul>';\n      for(let i = 0; i < barcodes.length; i++) {\n        footer.innerHTML += \n            '<li>@ (' + barcodes[i].boundingBox.x + ',' + \n            barcodes[i].boundingBox.y + '), size (' + \n            barcodes[i].boundingBox.width + 'x' + \n            barcodes[i].boundingBox.height + ')' + \n            '; rawValue=' + barcodes[i].rawValue + '</li>';\n      }\n      footer.innerHTML += '</ul>';\n  \n    }).catch((e) => {\n    \tlet footer = document.getElementsByTagName('footer');\n      footer.innerHTML = \"Boo, Barcode Detection failed: \" + e;\n      console.error(\"Boo, Barcode Detection failed: \" + e);\n    })\n\t}\n\n\trender() {\n\t\treturn (\n\t<div>\n\t\t<button id=\"detect\" onClick={this.detect} >Detect barcodes</button>\n\t\t<img hidden id=\"image\" crossOrigin='anonymous 'src=\"https://raw.githubusercontent.com/ihabunek/pdf417-py/master/images/1_basic.jpg\"></img> <br/>\n\t\t<canvas id=\"canvas\" width=\"320\" height=\"320\"></canvas>\n\t\t<footer>waiting</footer>\n\t</div>\n\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}