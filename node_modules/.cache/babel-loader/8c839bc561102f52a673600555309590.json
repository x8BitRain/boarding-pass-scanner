{"ast":null,"code":"var _jsxFileName = \"/home/mint/ticket2calendar/src/components/capture.jsx\";\nimport React from 'react';\nexport default class Capture extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.detect = () => {\n      // if (window.BarcodeDetector === undefined) {\n      //   console.log('Barcode Detection not supported');\n      //   return;\n      // }\n      let image = document.getElementById('image');\n      let canvas = document.getElementById('canvas');\n      let ctx = canvas.getContext(\"2d\");\n      const scale = canvas.width / image.width;\n      let barcodeDetector = new window.BarcodeDetector();\n      barcodeDetector.detect(image).then(barcodes => {\n        // Draw the boxes on the <canvas>.\n        let ctx = document.getElementById('canvas').getContext(\"2d\");\n        ctx.beginPath();\n        ctx.lineWidth = 2;\n        ctx.strokeStyle = \"red\";\n\n        for (let i = 0; i < barcodes.length; i++) {\n          ctx.rect(Math.floor(barcodes[i].boundingBox.x * scale), Math.floor(barcodes[i].boundingBox.y * scale), Math.floor(barcodes[i].boundingBox.width * scale), Math.floor(barcodes[i].boundingBox.height * scale));\n          ctx.stroke();\n        }\n\n        ctx.closePath();\n        ctx.beginPath();\n        ctx.strokeStyle = \"yellow\";\n\n        for (let i = 0; i < barcodes.length; i++) {\n          ctx.moveTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), Math.floor(barcodes[i].cornerPoints[0].y * scale));\n          ctx.lineTo(Math.floor(barcodes[i].cornerPoints[1].x * scale), Math.floor(barcodes[i].cornerPoints[1].y * scale));\n          ctx.lineTo(Math.floor(barcodes[i].cornerPoints[2].x * scale), Math.floor(barcodes[i].cornerPoints[2].y * scale));\n          ctx.lineTo(Math.floor(barcodes[i].cornerPoints[3].x * scale), Math.floor(barcodes[i].cornerPoints[3].y * scale));\n          ctx.lineTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), Math.floor(barcodes[i].cornerPoints[0].y * scale));\n          ctx.stroke();\n        }\n\n        ctx.closePath(); // Add the barcodes as strings to the <footer>\n\n        let footer = document.getElementsByTagName('footer');\n        footer.innerHTML = '<p>Detected ' + barcodes.length + ' barcodes</p><ul>';\n\n        for (let i = 0; i < barcodes.length; i++) {\n          footer.innerHTML += '<li>@ (' + barcodes[i].boundingBox.x + ',' + barcodes[i].boundingBox.y + '), size (' + barcodes[i].boundingBox.width + 'x' + barcodes[i].boundingBox.height + ')' + '; rawValue=' + barcodes[i].rawValue + '</li>';\n        }\n\n        footer.innerHTML += '</ul>';\n      }).catch(e => {\n        let footer = document.getElementsByTagName('footer');\n        footer.innerHTML = \"Boo, Barcode Detection failed: \" + e;\n        console.error(\"Boo, Barcode Detection failed: \" + e);\n      });\n    };\n  }\n\n  componentDidMount() {\n    let image = document.getElementById('image');\n    let canvas = document.getElementById('canvas');\n    let ctx = canvas.getContext(\"2d\");\n    canvas.width = image.width;\n    canvas.height = image.height;\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height);\n    const scale = canvas.width / image.width;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      id: \"detect\",\n      onClick: this.detect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Detect barcodes\"), React.createElement(\"img\", {\n      hidden: true,\n      id: \"image\",\n      crossOrigin: \"anonymous \",\n      src: \"https://raw.githubusercontent.com/ihabunek/pdf417-py/master/images/1_basic.jpg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), \" \", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"canvas\", {\n      id: \"canvas\",\n      width: \"320\",\n      height: \"320\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"footer\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"waiting\"));\n  }\n\n}","map":{"version":3,"sources":["/home/mint/ticket2calendar/src/components/capture.jsx"],"names":["React","Capture","Component","constructor","props","detect","image","document","getElementById","canvas","ctx","getContext","scale","width","barcodeDetector","window","BarcodeDetector","then","barcodes","beginPath","lineWidth","strokeStyle","i","length","rect","Math","floor","boundingBox","x","y","height","stroke","closePath","moveTo","cornerPoints","lineTo","footer","getElementsByTagName","innerHTML","rawValue","catch","e","console","error","componentDidMount","drawImage","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe,MAAMC,OAAN,SAAsBD,KAAK,CAACE,SAA5B,CAAsC;AACpDC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AAClB,UAAMA,KAAN;;AADkB,SAiBnBC,MAjBmB,GAiBV,MAAM;AACd;AACA;AACA;AACA;AAEA,UAAIC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AACD,UAAIC,MAAM,GAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb;AACA,UAAIE,GAAG,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAV;AACA,YAAMC,KAAK,GAAGH,MAAM,CAACI,KAAP,GAAeP,KAAK,CAACO,KAAnC;AACC,UAAIC,eAAe,GAAG,IAAIC,MAAM,CAACC,eAAX,EAAtB;AACAF,MAAAA,eAAe,CAACT,MAAhB,CAAuBC,KAAvB,EACGW,IADH,CACQC,QAAQ,IAAI;AAChB;AACA,YAAIR,GAAG,GAAGH,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCG,UAAlC,CAA6C,IAA7C,CAAV;AACAD,QAAAA,GAAG,CAACS,SAAJ;AACAT,QAAAA,GAAG,CAACU,SAAJ,GAAgB,CAAhB;AACAV,QAAAA,GAAG,CAACW,WAAJ,GAAkB,KAAlB;;AACA,aAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,QAAQ,CAACK,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvCZ,UAAAA,GAAG,CAACc,IAAJ,CAASC,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYK,WAAZ,CAAwBC,CAAxB,GAA4BhB,KAAvC,CAAT,EACSa,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYK,WAAZ,CAAwBE,CAAxB,GAA4BjB,KAAvC,CADT,EAESa,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYK,WAAZ,CAAwBd,KAAxB,GAAgCD,KAA3C,CAFT,EAGSa,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYK,WAAZ,CAAwBG,MAAxB,GAAiClB,KAA5C,CAHT;AAIAF,UAAAA,GAAG,CAACqB,MAAJ;AACD;;AACDrB,QAAAA,GAAG,CAACsB,SAAJ;AAEAtB,QAAAA,GAAG,CAACS,SAAJ;AACAT,QAAAA,GAAG,CAACW,WAAJ,GAAkB,QAAlB;;AACA,aAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,QAAQ,CAACK,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvCZ,UAAAA,GAAG,CAACuB,MAAJ,CAAWR,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BN,CAA5B,GAAgChB,KAA3C,CAAX,EACWa,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BL,CAA5B,GAAgCjB,KAA3C,CADX;AAEAF,UAAAA,GAAG,CAACyB,MAAJ,CAAWV,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BN,CAA5B,GAAgChB,KAA3C,CAAX,EACWa,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BL,CAA5B,GAAgCjB,KAA3C,CADX;AAEAF,UAAAA,GAAG,CAACyB,MAAJ,CAAWV,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BN,CAA5B,GAAgChB,KAA3C,CAAX,EACWa,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BL,CAA5B,GAAgCjB,KAA3C,CADX;AAEAF,UAAAA,GAAG,CAACyB,MAAJ,CAAWV,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BN,CAA5B,GAAgChB,KAA3C,CAAX,EACWa,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BL,CAA5B,GAAgCjB,KAA3C,CADX;AAEAF,UAAAA,GAAG,CAACyB,MAAJ,CAAWV,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BN,CAA5B,GAAgChB,KAA3C,CAAX,EACWa,IAAI,CAACC,KAAL,CAAWR,QAAQ,CAACI,CAAD,CAAR,CAAYY,YAAZ,CAAyB,CAAzB,EAA4BL,CAA5B,GAAgCjB,KAA3C,CADX;AAEAF,UAAAA,GAAG,CAACqB,MAAJ;AACD;;AACDrB,QAAAA,GAAG,CAACsB,SAAJ,GA9BgB,CAgChB;;AACA,YAAII,MAAM,GAAG7B,QAAQ,CAAC8B,oBAAT,CAA8B,QAA9B,CAAb;AACAD,QAAAA,MAAM,CAACE,SAAP,GACI,iBAAiBpB,QAAQ,CAACK,MAA1B,GAAmC,mBADvC;;AAEA,aAAI,IAAID,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGJ,QAAQ,CAACK,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACvCc,UAAAA,MAAM,CAACE,SAAP,IACI,YAAYpB,QAAQ,CAACI,CAAD,CAAR,CAAYK,WAAZ,CAAwBC,CAApC,GAAwC,GAAxC,GACAV,QAAQ,CAACI,CAAD,CAAR,CAAYK,WAAZ,CAAwBE,CADxB,GAC4B,WAD5B,GAEAX,QAAQ,CAACI,CAAD,CAAR,CAAYK,WAAZ,CAAwBd,KAFxB,GAEgC,GAFhC,GAGAK,QAAQ,CAACI,CAAD,CAAR,CAAYK,WAAZ,CAAwBG,MAHxB,GAGiC,GAHjC,GAIA,aAJA,GAIgBZ,QAAQ,CAACI,CAAD,CAAR,CAAYiB,QAJ5B,GAIuC,OAL3C;AAMD;;AACDH,QAAAA,MAAM,CAACE,SAAP,IAAoB,OAApB;AAED,OA/CH,EA+CKE,KA/CL,CA+CYC,CAAD,IAAO;AACf,YAAIL,MAAM,GAAG7B,QAAQ,CAAC8B,oBAAT,CAA8B,QAA9B,CAAb;AACCD,QAAAA,MAAM,CAACE,SAAP,GAAmB,oCAAoCG,CAAvD;AACAC,QAAAA,OAAO,CAACC,KAAR,CAAc,oCAAoCF,CAAlD;AACD,OAnDH;AAoDA,KAhFkB;AAGnB;;AACAG,EAAAA,iBAAiB,GAAG;AACnB,QAAItC,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAZ;AACA,QAAIC,MAAM,GAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAb;AACA,QAAIE,GAAG,GAAGD,MAAM,CAACE,UAAP,CAAkB,IAAlB,CAAV;AACAF,IAAAA,MAAM,CAACI,KAAP,GAAeP,KAAK,CAACO,KAArB;AACAJ,IAAAA,MAAM,CAACqB,MAAP,GAAgBxB,KAAK,CAACwB,MAAtB;AACApB,IAAAA,GAAG,CAACmC,SAAJ,CAAcvC,KAAd,EACA,CADA,EACG,CADH,EACMA,KAAK,CAACO,KADZ,EACmBP,KAAK,CAACwB,MADzB,EAEA,CAFA,EAEG,CAFH,EAEMrB,MAAM,CAACI,KAFb,EAEoBJ,MAAM,CAACqB,MAF3B;AAIA,UAAMlB,KAAK,GAAGH,MAAM,CAACI,KAAP,GAAeP,KAAK,CAACO,KAAnC;AACA;;AAmEDiC,EAAAA,MAAM,GAAG;AACR,WACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAQ,MAAA,EAAE,EAAC,QAAX;AAAoB,MAAA,OAAO,EAAE,KAAKzC,MAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADD,EAEC;AAAK,MAAA,MAAM,MAAX;AAAY,MAAA,EAAE,EAAC,OAAf;AAAuB,MAAA,WAAW,EAAC,YAAnC;AAA+C,MAAA,GAAG,EAAC,gFAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFD,OAE4I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAF5I,EAGC;AAAQ,MAAA,EAAE,EAAC,QAAX;AAAoB,MAAA,KAAK,EAAC,KAA1B;AAAgC,MAAA,MAAM,EAAC,KAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHD,EAIC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJD,CADC;AASA;;AA7FmD","sourcesContent":["import React from 'react';\n\nexport default class Capture extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\n}\n\tcomponentDidMount() {\n\t\tlet image = document.getElementById('image');\n\t\tlet canvas = document.getElementById('canvas');\n\t\tlet ctx = canvas.getContext(\"2d\");\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\t\tctx.drawImage(image, \n\t\t0, 0, image.width, image.height,\n\t\t0, 0, canvas.width, canvas.height);\n\n\t\tconst scale = canvas.width / image.width;\n\t}\n\n\tdetect = () => {\n  // if (window.BarcodeDetector === undefined) {\n  //   console.log('Barcode Detection not supported');\n  //   return;\n  // }\n\n  let image = document.getElementById('image');\n\tlet canvas = document.getElementById('canvas');\n\tlet ctx = canvas.getContext(\"2d\");\n\tconst scale = canvas.width / image.width;\n  let barcodeDetector = new window.BarcodeDetector();\n  barcodeDetector.detect(image)\n    .then(barcodes => {\n      // Draw the boxes on the <canvas>.\n      let ctx = document.getElementById('canvas').getContext(\"2d\");\n      ctx.beginPath();\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = \"red\";\n      for(let i = 0; i < barcodes.length; i++) {\n        ctx.rect(Math.floor(barcodes[i].boundingBox.x * scale), \n                 Math.floor(barcodes[i].boundingBox.y * scale),\n                 Math.floor(barcodes[i].boundingBox.width * scale), \n                 Math.floor(barcodes[i].boundingBox.height * scale));\n        ctx.stroke();\n      }\n      ctx.closePath();\n\n      ctx.beginPath();\n      ctx.strokeStyle = \"yellow\";\n      for(let i = 0; i < barcodes.length; i++) {\n        ctx.moveTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[0].y * scale));\n        ctx.lineTo(Math.floor(barcodes[i].cornerPoints[1].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[1].y * scale));\n        ctx.lineTo(Math.floor(barcodes[i].cornerPoints[2].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[2].y * scale));\n        ctx.lineTo(Math.floor(barcodes[i].cornerPoints[3].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[3].y * scale));\n        ctx.lineTo(Math.floor(barcodes[i].cornerPoints[0].x * scale), \n                   Math.floor(barcodes[i].cornerPoints[0].y * scale));\n        ctx.stroke();\n      }\n      ctx.closePath();\n    \n      // Add the barcodes as strings to the <footer>\n      let footer = document.getElementsByTagName('footer');\n      footer.innerHTML = \n          '<p>Detected ' + barcodes.length + ' barcodes</p><ul>';\n      for(let i = 0; i < barcodes.length; i++) {\n        footer.innerHTML += \n            '<li>@ (' + barcodes[i].boundingBox.x + ',' + \n            barcodes[i].boundingBox.y + '), size (' + \n            barcodes[i].boundingBox.width + 'x' + \n            barcodes[i].boundingBox.height + ')' + \n            '; rawValue=' + barcodes[i].rawValue + '</li>';\n      }\n      footer.innerHTML += '</ul>';\n  \n    }).catch((e) => {\n    \tlet footer = document.getElementsByTagName('footer');\n      footer.innerHTML = \"Boo, Barcode Detection failed: \" + e;\n      console.error(\"Boo, Barcode Detection failed: \" + e);\n    })\n\t}\n\n\trender() {\n\t\treturn (\n\t<div>\n\t\t<button id=\"detect\" onClick={this.detect} >Detect barcodes</button>\n\t\t<img hidden id=\"image\" crossOrigin='anonymous 'src=\"https://raw.githubusercontent.com/ihabunek/pdf417-py/master/images/1_basic.jpg\"></img> <br/>\n\t\t<canvas id=\"canvas\" width=\"320\" height=\"320\"></canvas>\n\t\t<footer>waiting</footer>\n\t</div>\n\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}